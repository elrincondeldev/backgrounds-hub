---
import "../styles/global.css";
import Github from "../icons/Github";
import Content from "./Content";
---

<div class="relative min-h-screen w-full">
  <div id="background-container" class="fixed inset-0 -z-10">
    <div class="absolute inset-0 h-full w-full bg-white bg-[linear-gradient(to_right,#f0f0f0_1px,transparent_1px),linear-gradient(to_bottom,#f0f0f0_1px,transparent_1px)] bg-[size:6rem_4rem]">
      <div class="absolute bottom-0 left-0 right-0 top-0 bg-[radial-gradient(circle_800px_at_100%_200px,#d5c5ff,transparent)]"></div>
    </div>
  </div>

  <main class="relative z-10 flex flex-col items-center justify-center gap-10">
    <h1 class="text-[5rem] gradient-text font-bold">Background Hub</h1>
    <div class="flex flex-col gap-5 items-center">
      <div class="w-[40rem]">
        <p class="text-xl text-gray-700 mb-2 text-center">Collection of modern, high quality backgrounds</p>
        <p class="text-lg text-gray-500 text-center">Ready-to-use, simply copy and paste into your next project. All snippets crafted with Tailwind CSS and Vanilla CSS for easy integration.</p>
      </div>
      <a href="https://github.com/elrincondeldev/background-hub" class="flex items-center gap-2 text-lg text-gray-700 hover:text-gray-900">
        <Github width={20} height={20} />
        Star on Github
      </a>
    </div>
    <Content client:load />
  </main>
</div>

<script>
  function updateBackground() {
    const container = document.getElementById('background-container');
    const savedBackground = localStorage.getItem('selectedBackground');
    
    if (container && savedBackground) {

      const backgroundDiv = document.createElement('div');
      backgroundDiv.innerHTML = savedBackground;
      const backgroundElement = backgroundDiv.firstElementChild;
      
      if (backgroundElement) {
        backgroundElement.classList.add('fixed', 'inset-0', '-z-10');
        container.innerHTML = backgroundElement.outerHTML;
      }
    }
  }

  updateBackground();

  window.addEventListener('backgroundChanged', updateBackground);
</script>
</main>
