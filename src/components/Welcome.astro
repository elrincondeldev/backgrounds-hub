---
import "../styles/global.css";
import Github from "../icons/Github";
import Content from "./Content";
import Info from "./Info";
---

<div class="relative min-h-screen w-full">
  <div id="background-container" class="fixed inset-0 -z-10">
    <div class="absolute inset-0 h-full w-full bg-white bg-[linear-gradient(to_right,#f0f0f0_1px,transparent_1px),linear-gradient(to_bottom,#f0f0f0_1px,transparent_1px)] bg-[size:6rem_4rem]">
      <div class="absolute bottom-0 left-0 right-0 top-0 bg-[radial-gradient(circle_800px_at_100%_200px,#d5c5ff,transparent)]"></div>
    </div>
  </div>

  <section class="relative z-10 flex flex-col items-center justify-center gap-10">
    <h1 class="text-[3rem] text-center md:text-[5rem] gradient-text font-bold">Background Hub</h1>
    <Info client:load />
    <Content client:load />
  </section>
</div>

<script>


  function updateBackground() {
    const container = document.getElementById('background-container');
    const savedBackground = localStorage.getItem('selectedBackground');
    
    if (container && savedBackground) {

      const backgroundDiv = document.createElement('div');
      backgroundDiv.innerHTML = savedBackground;
      const backgroundElement = backgroundDiv.firstElementChild;
      
      if (backgroundElement) {
        backgroundElement.classList.add('fixed', 'inset-0', '-z-10');
        container.innerHTML = backgroundElement.outerHTML;
      }
    }
  }

  updateBackground();

  window.addEventListener('backgroundChanged', updateBackground);
</script>
</main>