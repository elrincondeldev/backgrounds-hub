---
import "../styles/global.css";
import Content from "./Content";
import Info from "./Info";
---

<div class="relative min-h-screen w-full">
  <div id="background-container" class="fixed inset-0 z-10 h-full w-full bg-gradient-to-br from-black to-slate-900">
    <div class="absolute inset-0 bg-[conic-gradient(from_180deg_at_50%_50%,#3b82f680_0deg,#10b98180_72deg,#6366f180_144deg,#8b5cf680_216deg,#ec489980_288deg,#3b82f680_360deg)] animate-[spin_3s_linear_infinite] blur-[75px]" />
    <div class="absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.07)_2px,transparent_2px),linear-gradient(90deg,rgba(255,255,255,0.07)_2px,transparent_2px)] bg-[size:40px_40px]" />
  </div>

  <section class="relative z-10 flex flex-col items-center justify-center gap-10">
    <h1 class="text-[3rem] text-center md:text-[5rem] gradient-text font-bold">Backgrounds Hub</h1>
    <Info client:load />
    <Content client:load />
  </section>
</div>

<script>


  function updateBackground() {
    const container = document.getElementById('background-container');
    const savedBackground = localStorage.getItem('selectedBackground');
    
    if (container && savedBackground) {

      const backgroundDiv = document.createElement('div');
      backgroundDiv.innerHTML = savedBackground;
      const backgroundElement = backgroundDiv.firstElementChild;
      
      if (backgroundElement) {
        backgroundElement.classList.add('fixed', 'inset-0', '-z-10');
        container.innerHTML = backgroundElement.outerHTML;
      }
    }
  }

  updateBackground();

  window.addEventListener('backgroundChanged', updateBackground);
</script>
</main>